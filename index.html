<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- ‚úÖ D√úZELTƒ∞LMƒ∞≈û CSP - T√ºm hatalar i√ßin -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src *; style-src * 'unsafe-inline'; img-src * data: blob:;">
  
  <!-- ‚úÖ ETHER.JS CDN - ContractService i√ßin ZORUNLU -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  
  <title>Celo Engage Hub</title>
  <link rel="stylesheet" href="src/styles/main.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üåê</text></svg>">
  <style>
    .wallet-btn {
      background-color: #35D07F;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      padding: 10px 18px;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      transition: background 0.3s ease;
    }
    .wallet-btn:hover {
      background-color: #2fb46d;
    }
    #walletStatus {
      background: #fff;
      padding: 8px;
      border-radius: 8px;
      text-align: center;
      font-size: 14px;
      border: 1px solid #ddd;
    }
    
    .step-indicator {
      margin: 0 0 20px 0;
      font-weight: bold;
      color: #000000;
      font-size: 20px;
      text-align: center;
      width: 100%;
    }
    .step-number {
      background: #FBCC5C;
      color: black;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
    }
    .step-container {
      background: #FFFDF6;
      border: 2px solid #FBCC5C;
      padding: 25px;
      border-radius: 12px;
      text-align: center;
      height: fit-content;
      width: 100%;
    }
    .links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px auto;
      width: 100%;
    }
    .link-platform {
      font-size: 14px;
      color: #666;
      margin-bottom: 10px;
      font-weight: bold;
      background: #FFF0C2;
      padding: 5px 10px;
      border-radius: 20px;
      display: inline-block;
    }
    .support-link {
      color: #000000;
      text-decoration: none;
      word-break: break-all;
      display: block;
      margin-bottom: 15px;
      font-weight: bold;
      font-size: 16px;
      line-height: 1.4;
    }
    .link-stats {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
      font-size: 14px;
      color: #666;
    }
    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .stat-value {
      font-weight: bold;
      font-size: 18px;
      color: #000000;
    }
    .supportBtn {
      background: #FBCC5C;
      color: black;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 8px;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s ease;
      width: 100%;
    }
    .supportBtn:hover {
      background: #000000;
      color: #FBCC5C;
      transform: translateY(-2px);
    }
    .owner-badge {
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: black;
      padding: 4px 8px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 10px;
      margin-top: 5px;
      display: inline-block;
    }

    /* ‚úÖ YENƒ∞ EKLENEN STILLER - T√ºm √∂zellikler i√ßin */
    .section {
      display: none;
      padding: 20px;
    }
    .section.active {
      display: block;
    }
    .nav-button {
      padding: 10px 15px;
      margin: 0 5px;
      border: none;
      border-radius: 8px;
      background: #f0f0f0;
      cursor: pointer;
    }
    .nav-button.active {
      background: #35D07F;
      color: white;
    }
    .feature-card {
      background: #FFFDF6;
      border: 2px solid #FBCC5C;
      padding: 20px;
      border-radius: 12px;
      margin: 15px 0;
    }
    .input-group {
      margin: 15px 0;
    }
    .input-group input, .input-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      margin: 5px 0;
    }
    .action-button {
      background: #35D07F;
      color: black;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 5px;
      font-weight: bold;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .stat-card {
      background: #FFFDF6;
      border: 1px solid #FBCC5C;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .badge {
      display: inline-block;
      background: #FFD700;
      color: black;
      padding: 5px 10px;
      border-radius: 15px;
      margin: 2px;
      font-size: 12px;
      font-weight: bold;
    }

    /* ‚úÖ DONATE √ñZEL STƒ∞LLERƒ∞ */
    .donate-buttons {
      display: flex;
      gap: 10px;
      margin: 15px 0;
      flex-wrap: wrap;
    }
    .donate-buttons button {
      flex: 1;
      min-width: 120px;
    }
    .token-selector {
      display: flex;
      gap: 10px;
      margin: 15px 0;
    }
    .token-btn {
      flex: 1;
      padding: 12px;
      border: 2px solid #FBCC5C;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    .token-btn.active {
      background: #FBCC5C;
      color: black;
    }
    .withdraw-section {
      background: #FFF0F0;
      border: 2px solid #FF6B6B;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }

    /* ‚úÖ YENƒ∞: WALLET MODAL STƒ∞LLERƒ∞ */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 300px;
      border-radius: 12px;
      text-align: center;
      animation: modalSlideIn 0.3s ease-out;
    }
    @keyframes modalSlideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover {
      color: black;
    }
    .wallet-option-btn {
      background: #FFFDF6;
      border: 2px solid #FBCC5C;
      border-radius: 8px;
      padding: 15px;
      width: 100%;
      margin: 10px 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: start;
      transition: all 0.3s ease;
    }
    .wallet-option-btn:hover:not(:disabled) {
      background: #FBCC5C !important;
      transform: translateY(-2px);
    }
    .wallet-option-btn:disabled {
      background: #f0f0f0;
      border: 2px solid #ddd;
      cursor: not-allowed;
      opacity: 0.6;
    }
    .disconnect-btn {
      background-color: #f44336;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 18px;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    .disconnect-btn:hover {
      background-color: #d32f2f;
    }
  </style>
</head>
<body>
  <div class="centered-content">
    <header>
      <div class="title-bar">
        <span class="emoji">üåê</span> <span>Celo Engage Hub</span>
      </div>
      <p class="subtitle"><i>Social TX ‚Äì Where Every Interaction Builds Real Value</i></p>
      <p class="description">If you want support, support first</p>

      <!-- ‚úÖ YENƒ∞ NAVIGATION - T√ºm √∂zellikler i√ßin -->
      <div class="nav-bar">
        <button class="nav-button active" data-section="home">üè† Home</button>
        <button class="nav-button" data-section="gm">üëã GM</button>
        <button class="nav-button" data-section="deploy">üöÄ Deploy</button>
        <button class="nav-button" data-section="donate">üíõ Donate</button>
        <button class="nav-button" data-section="links">üîó Links</button>
        <button class="nav-button" data-section="governance">üó≥Ô∏è Governance</button>
        <button class="nav-button" data-section="profile">üë§ Profile</button>
        <button class="nav-button" data-section="badges">üèÜ Badges</button>
        <button class="nav-button" data-section="leaderboard">üèÜ Leaderboard</button>
      </div>
    </header>

    <div class="container">
      <aside class="sidebar">
        <!-- ‚úÖ G√úNCELLENMƒ∞≈û WALLET BOX -->
        <div class="wallet-box">
          <div id="walletStatus">
            <p>üî¥ Not connected</p>
            <span id="networkLabel">‚Äî</span>
          </div>
          <!-- Connect Wallet Butonu -->
          <button id="connectWallet" class="wallet-btn">Connect Wallet</button>
          
          <!-- Baƒülandƒ±ktan sonra g√∂r√ºnecek bilgiler ve Disconnect Butonu -->
          <div id="walletInfo" style="display: none;">
            <p><strong>Address:</strong> <span id="walletAddress"></span></p>
            <p><strong>Balance:</strong> <span id="walletBalance"></span></p>
            <!-- YENƒ∞: Disconnect Butonu -->
            <button id="disconnectWallet" class="disconnect-btn">Disconnect</button>
          </div>
        </div>

        <!-- ‚úÖ YENƒ∞: BAƒûLANTI SE√áENEKLERƒ∞ MODAL'ƒ± -->
        <div id="walletModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Connect a Wallet</h3>
            
            <!-- MetaMask Se√ßeneƒüi -->
            <button id="connectMetaMask" class="wallet-option-btn">
              <img src="https://raw.githubusercontent.com/MetaMask/brand-resources/master/SVG/metamask-fox.svg" alt="MetaMask" style="width: 32px; height: 32px; margin-right: 15px;">
              <div style="text-align: left;">
                <div style="font-weight: bold;">MetaMask</div>
                <div style="font-size: 0.8em; color: #666;">Desktop & Mobile</div>
              </div>
            </button>
            
            <!-- WalletConnect Se√ßeneƒüi (Coming Soon) -->
            <button id="connectWalletConnect" class="wallet-option-btn" disabled>
              <img src="https://docs.walletconnect.com/assets/images/logo-white-5526b5d6a382e2e6c680e465a38d34d5.png" alt="WalletConnect" style="width: 32px; height: 32px; margin-right: 15px; background: #3b99fc; border-radius: 8px; padding: 4px;">
              <div style="text-align: left;">
                <div style="font-weight: bold;">WalletConnect</div>
                <div style="font-size: 0.8em; color: #666;">Coming Soon</div>
              </div>
            </button>
          </div>
        </div>

        <!-- ‚úÖ SIDEBAR DONATE KUTUSU -->
        <div class="donate-box">
          <h3>üíõ Quick Donate</h3>
          <p>Fast support with preset amounts</p>
          <div class="donate-buttons">
            <button class="supportBtn" data-amount="0.1" data-token="CELO">0.1 CELO</button>
            <button class="supportBtn" data-amount="0.5" data-token="CELO">0.5 CELO</button>
            <button class="supportBtn" data-amount="1" data-token="CELO">1 CELO</button>
            <button class="supportBtn" data-amount="0.1" data-token="cUSD">0.1 cUSD</button>
          </div>
        </div>

        <!-- ‚úÖ GLOBAL STATS -->
        <div class="global-stats">
          <h3>üìä Global Stats</h3>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value" id="globalVisitors">0</div>
              <div class="stat-label">Visitors</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="globalGM">0</div>
              <div class="stat-label">GM Count</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="globalDeploy">0</div>
              <div class="stat-label">Deploys</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="globalLinks">0</div>
              <div class="stat-label">Links</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="globalVotes">0</div>
              <div class="stat-label">Votes</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="globalBadges">0</div>
              <div class="stat-label">Badges</div>
            </div>
          </div>
        </div>

        <div class="ecosystem-box">
          <h3>üü° Celo Ecosystem</h3>
          <ul>
            <li><a href="https://celo.org" target="_blank">üåç Celo Official</a></li>
            <li><a href="https://docs.celo.org" target="_blank">üìò Celo Documentation</a></li>
            <li><a href="https://developers.celo.org" target="_blank">üíª Developer Portal</a></li>
            <li><a href="https://celoscan.io" target="_blank">üîé Celo Explorer</a></li>
            <li><a href="https://forum.celo.org" target="_blank">üí¨ Celo Forum</a></li>
            <li><a href="https://x.com/Celo" target="_blank">üê¶ Celo Twitter</a></li>
            <li><a href="https://chat.celo.org" target="_blank">üí¨ Celo Discord</a></li>
            <li><a href="https://blog.celo.org" target="_blank">üì∞ Celo Blog</a></li>
            <li><a href="https://github.com/celo-org" target="_blank">üíª Celo GitHub</a></li>
          </ul>
        </div>
      </aside>

      <main class="main-content">
        <!-- ‚úÖ HOME SECTION -->
        <section id="homeSection" class="section active">
          <div class="step-indicator">
            <span class="step-number">1</span> Support Community Members
          </div>
          
          <div class="step-container">
            <div class="support-header">
              <h3>ü§ù Support Others First</h3>
              <p>To submit your link, you must first support at least one community member</p>
            </div>

            <div class="links-grid" id="linksContainer">
              <!-- Link kartlarƒ± buraya dinamik olarak eklenecek -->
            </div>
          </div>
        </section>

        <!-- ‚úÖ GM SECTION -->
        <section id="gmSection" class="section">
          <div class="feature-card">
            <h3>üëã Send GM</h3>
            <div class="input-group">
              <input type="text" id="gmMessageInput" placeholder="Enter your GM message (optional)" value="Hello from Celo Engage Hub!">
            </div>
            <button id="gmButton" class="action-button">Send GM üåü</button>
            <div class="stats-grid">
              <div class="stat-card">
                <h4>Global GM Count</h4>
                <div id="gmCounter">0</div>
              </div>
              <div class="stat-card">
                <h4>Your GM Count</h4>
                <div id="userGmCounter">0</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ‚úÖ DEPLOY SECTION -->
        <section id="deploySection" class="section">
          <div class="feature-card">
            <h3>üöÄ Deploy Contract</h3>
            <div class="input-group">
              <input type="text" id="contractNameInput" placeholder="Enter contract name (optional)" value="MyContract">
            </div>
            <button id="deployButton" class="action-button">Deploy Contract üöÄ</button>
            <div class="stats-grid">
              <div class="stat-card">
                <h4>Global Deploy Count</h4>
                <div id="deployCounter">0</div>
              </div>
              <div class="stat-card">
                <h4>Your Deploy Count</h4>
                <div id="userDeployCounter">0</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ‚úÖ DONATE SECTION - TAM DONATE Sƒ∞STEMƒ∞ -->
        <section id="donateSection" class="section">
          <div class="feature-card">
            <h3>üíõ Make a Donation</h3>
            <p><strong>Minimum donation: 0.1 CELO or 0.1 cUSD</strong></p>
            
            <div class="input-group">
              <input type="number" id="donateAmountInput" placeholder="Enter amount (min 0.1)" step="0.1" min="0.1" value="0.1">
            </div>

            <!-- Token Se√ßimi -->
            <div class="token-selector">
              <button class="token-btn active" data-token="CELO">CELO üíõ</button>
              <button class="token-btn" data-token="cUSD">cUSD üíµ</button>
            </div>

            <!-- Donate Butonlarƒ± -->
            <div class="donate-buttons">
              <button id="donateCeloBtn" class="action-button">Donate CELO üíõ</button>
              <button id="donateCusdBtn" class="action-button">Donate cUSD üíµ</button>
            </div>

            <!-- Hƒ±zlƒ± Donate Butonlarƒ± -->
            <div class="donate-buttons">
              <button class="supportBtn" data-amount="0.1" data-token="CELO">0.1 CELO</button>
              <button class="supportBtn" data-amount="0.5" data-token="CELO">0.5 CELO</button>
              <button class="supportBtn" data-amount="1" data-token="CELO">1 CELO</button>
              <button class="supportBtn" data-amount="5" data-token="CELO">5 CELO</button>
            </div>

            <!-- Owner Withdraw Panel -->
            <div id="withdrawPanel" class="withdraw-section" style="display: none;">
              <h4>üí∞ Owner Withdraw Panel</h4>
              <p>Withdraw donations to project owner</p>
              <button id="withdrawDonationsBtn" class="action-button" style="background: #FF6B6B;">Withdraw Donations üè¶</button>
              
              <div class="stats-grid">
                <div class="stat-card">
                  <h4>Total Donated</h4>
                  <div id="totalDonatedValue">0 CELO</div>
                </div>
                <div class="stat-card">
                  <h4>Total Donators</h4>
                  <div id="totalDonatorsCount">0</div>
                </div>
                <div class="stat-card">
                  <h4>Daily Limit</h4>
                  <div id="dailyWithdrawLimit">1000 CELO</div>
                </div>
              </div>
            </div>

            <!-- Donate ƒ∞statistikleri -->
            <div class="stats-grid">
              <div class="stat-card">
                <h4>Total Donators</h4>
                <div id="donateCounter">0</div>
              </div>
              <div class="stat-card">
                <h4>Your Donations</h4>
                <div id="userDonateCounter">0</div>
              </div>
              <div class="stat-card">
                <h4>Your Total Donated</h4>
                <div id="userTotalDonated">0 CELO</div>
              </div>
              <div class="stat-card">
                <h4>Top Donors</h4>
                <div id="topDonorsCount">0</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ‚úÖ LINKS SECTION -->
        <section id="linksSection" class="section">
          <div class="feature-card">
            <h3>üîó Share Links</h3>
            <div class="input-group">
              <input type="text" id="linkInput" placeholder="Enter your link (https://...)">
            </div>
            <button id="shareLinkBtn" class="action-button">Share Link üîó</button>
            <div class="stats-grid">
              <div class="stat-card">
                <h4>Global Links</h4>
                <div id="linkCounter">0</div>
              </div>
              <div class="stat-card">
                <h4>Your Links</h4>
                <div id="userLinkCounter">0</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ‚úÖ GOVERNANCE SECTION -->
        <section id="governanceSection" class="section">
          <div class="feature-card">
            <h3>üó≥Ô∏è Governance</h3>
            
            <!-- Owner Only: Create Proposal -->
            <div id="ownerPanel" style="display: none;">
              <h4>Create Proposal (Owner Only)</h4>
              <div class="input-group">
                <input type="text" id="proposalTitleInput" placeholder="Proposal Title">
                <textarea id="proposalDescInput" placeholder="Proposal Description"></textarea>
                <input type="text" id="proposalLinkInput" placeholder="Proposal Link (optional)">
              </div>
              <button id="createProposalBtn" class="action-button">Create Proposal üìù</button>
            </div>

            <!-- Active Proposals -->
            <h4>Active Proposals</h4>
            <div id="proposalsList">
              <!-- Proposals will be loaded here -->
            </div>

            <div class="stats-grid">
              <div class="stat-card">
                <h4>Total Votes</h4>
                <div id="voteCounter">0</div>
              </div>
              <div class="stat-card">
                <h4>Your Votes</h4>
                <div id="userVoteCounter">0</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ‚úÖ PROFILE SECTION -->
        <section id="profileSection" class="section">
          <div class="feature-card">
            <h3>üë§ Your Profile</h3>
            <div id="profileInfo">
              <p><strong>Address:</strong> <span id="profileAddress">-</span></p>
              <p><strong>Level:</strong> <span id="profileLevel">1</span></p>
              <p><strong>Tier:</strong> <span id="profileTier">1</span></p>
              <p><strong>Total XP:</strong> <span id="profileXP">0</span></p>
            </div>
            
            <h4>Your Statistics</h4>
            <div class="stats-grid">
              <div class="stat-card">
                <h4>GM Count</h4>
                <div id="profileGMCount">0</div>
              </div>
              <div class="stat-card">
                <h4>Deploy Count</h4>
                <div id="profileDeployCount">0</div>
              </div>
              <div class="stat-card">
                <h4>Donate Count</h4>
                <div id="profileDonateCount">0</div>
              </div>
              <div class="stat-card">
                <h4>Link Count</h4>
                <div id="profileLinkCount">0</div>
              </div>
              <div class="stat-card">
                <h4>Vote Count</h4>
                <div id="profileVoteCount">0</div>
              </div>
            </div>

            <h4>Your Links</h4>
            <div id="userLinksList">
              <!-- User links will be loaded here -->
            </div>

            <h4>Your Contracts</h4>
            <div id="userContractsList">
              <!-- User contracts will be loaded here -->
            </div>
          </div>
        </section>

        <!-- ‚úÖ BADGES SECTION -->
        <section id="badgesSection" class="section">
          <div class="feature-card">
            <h3>üèÜ Your Badges</h3>
            <div id="userBadgeInfo">
              <!-- Badge info will be loaded here -->
            </div>
            <div id="badgesList">
              <!-- Badges will be displayed here -->
            </div>
          </div>
        </section>

        <!-- ‚úÖ LEADERBOARD SECTION -->
        <section id="leaderboardSection" class="section">
          <div class="feature-card">
            <h3>üèÜ Leaderboard</h3>
            <p>Coming soon...</p>
            <!-- Leaderboard will be implemented here -->
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- ‚úÖ D√úZELTƒ∞LMƒ∞≈û MAIN.JS YOLU -->
  <script type="module" src="src/main.js"></script>

  <script>
    // Donate butonlarƒ± i√ßin event listener
    document.addEventListener('DOMContentLoaded', function() {
      // Quick donate butonlarƒ±
      document.querySelectorAll('.supportBtn[data-amount]').forEach(btn => {
        btn.addEventListener('click', function() {
          const amount = this.getAttribute('data-amount');
          const token = this.getAttribute('data-token');
          document.getElementById('donateAmountInput').value = amount;
          
          // Token se√ßimini g√ºncelle
          document.querySelectorAll('.token-btn').forEach(tb => tb.classList.remove('active'));
          document.querySelector(`.token-btn[data-token="${token}"]`).classList.add('active');
        });
      });

      // Token se√ßimi
      document.querySelectorAll('.token-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.token-btn').forEach(tb => tb.classList.remove('active'));
          this.classList.add('active');
        });
      });
    });
  </script>
</body>
</html>
